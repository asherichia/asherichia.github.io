<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dr Ash Otter</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Font Awesome for Social Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <div class="hero">
    <!-- Container for falling antibodies -->
    <div class="raining-antibodies"></div>
    <div class="hero-content">
      <h1>Hey.</h1>
      <p>I'm Ash, an immunologist working to understand viruses.</p>
      <div class="hero-buttons">
        <a href="about.html" class="btn">About</a>
        <a href="cv.html" class="btn">CV</a>
        <a href="contact.html" class="btn">Contact</a>
      </div>
    </div>
  </div>
  <footer>
    <div class="social-icons">
      <a href="https://twitter.com/asherichia" target="_blank" class="social-icon twitter">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://github.com/asherichia" target="_blank" class="social-icon github">
        <i class="fab fa-github"></i>
      </a>
      <a href="https://www.linkedin.com/in/ashleyotter" target="_blank" class="social-icon linkedin">
        <i class="fab fa-linkedin-in"></i>
      </a>
      <a href="mailto:ashley.otter@ukhsa.gov.uk" class="social-icon email">
        <i class="fas fa-envelope"></i>
      </a>
      <a href="https://scholar.google.com/citations?user=ckBV9wAAAAJ" target="_blank" class="social-icon scholar">
        <i class="fas fa-graduation-cap"></i>
      </a>
    </div>
  </footer>
  
  <!-- JavaScript to generate falling antibody images with smooth attraction -->
  <script>
    const container = document.querySelector('.raining-antibodies');
    const numAntibodies = 50; // Increased number of antibodies
    for (let i = 0; i < numAntibodies; i++) {
      // Create a wrapper to handle falling and attraction
      const wrapper = document.createElement('div');
      wrapper.className = 'antibody-wrapper';
      // Random horizontal starting position for the wrapper
      const left = Math.random() * 100;
      wrapper.style.left = left + '%';
      // Random animation duration (falling) between 12s and 19s
      const duration = Math.random() * 7 + 12;
      wrapper.style.animationDuration = duration + 's';
      // Random animation delay between 0 and 8s
      const delay = Math.random() * 8;
      wrapper.style.animationDelay = delay + 's';
      // Random horizontal drift between -50px and 50px
      const drift = (Math.random() * 100 - 50).toFixed(0) + 'px';
      wrapper.style.setProperty('--drift', drift);
      // Initialize attraction offsets (used for smooth attraction)
      wrapper.style.setProperty('--repelX', '0px');
      wrapper.style.setProperty('--repelY', '0px');
      wrapper.dataset.targetX = "0";
      wrapper.dataset.targetY = "0";
      
      // Create the antibody image element
      const img = document.createElement('img');
      img.src = 'antibody.png';
      img.className = 'antibody';
      // Random size between 20 and 50 pixels
      const size = Math.floor(Math.random() * 31) + 20;
      img.style.width = size + 'px';
      // Set a random initial rotation from 0 to 720Â° for variety
      const rotation = Math.random() * 720 + 'deg';
      img.style.setProperty('--initialRotation', rotation);
      // Apply continuous spin: each image spins continuously with random speed (5-10s)
      const spinDuration = Math.random() * 5 + 5;
      img.style.animation = 'spin ' + spinDuration + 's linear infinite';
      
      wrapper.appendChild(img);
      container.appendChild(wrapper);
    }
    
    // On mousemove, calculate target attraction offsets for each wrapper
    document.addEventListener('mousemove', function(e) {
      const wrappers = document.querySelectorAll('.antibody-wrapper');
      wrappers.forEach(function(wrapper) {
        const rect = wrapper.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const dx = e.clientX - centerX;
        const dy = e.clientY - centerY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        const threshold = 100; // pixels
        let targetX = 0;
        let targetY = 0;
        if (distance < threshold) {
          // Increase attraction force (multiplier increased to 80)
          const force = (threshold - distance) / threshold * 80;
          const angle = Math.atan2(dy, dx);
          targetX = Math.cos(angle) * force;
          targetY = Math.sin(angle) * force;
        }
        wrapper.dataset.targetX = targetX;
        wrapper.dataset.targetY = targetY;
      });
    });
    
    // Smoothly update the CSS variables for each wrapper using requestAnimationFrame for fluid attraction
    function smoothUpdate() {
      const wrappers = document.querySelectorAll('.antibody-wrapper');
      wrappers.forEach(function(wrapper) {
        let currentX = parseFloat(wrapper.style.getPropertyValue('--repelX')) || 0;
        let currentY = parseFloat(wrapper.style.getPropertyValue('--repelY')) || 0;
        let targetX = parseFloat(wrapper.dataset.targetX) || 0;
        let targetY = parseFloat(wrapper.dataset.targetY) || 0;
        const smoothing = 0.1; // Adjust smoothing factor for more fluid motion
        let newX = currentX + smoothing * (targetX - currentX);
        let newY = currentY + smoothing * (targetY - currentY);
        wrapper.style.setProperty('--repelX', newX + 'px');
        wrapper.style.setProperty('--repelY', newY + 'px');
      });
      requestAnimationFrame(smoothUpdate);
    }
    smoothUpdate();
  </script>
</body>
</html>